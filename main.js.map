{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["export {config, getInitialCards, getUserInfo, postAddNewCard, addLike, deleteLike, deleteCard, editProfileInfo, editAvatar}\n\nconst config = {\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-18',\n    headers: {\n      authorization: '1b2f73d7-94a0-4ec1-9518-0b6c0b294ca7',\n      'Content-Type': 'application/json'\n    }\n};\n\nconst handleRes = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n  \nconst getInitialCards = () => {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers\n  })\n    .then(handleRes)\n} \n\nconst getUserInfo = () => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers\n  })\n  .then(handleRes)\n}\n\nconst postAddNewCard = (cardName, linksrc) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: 'POST',\n    headers: config.headers,\n    body: JSON.stringify({\n      name: cardName.value,\n      link: linksrc.value })\n  }) \n  .then(handleRes);\n}\n\nconst addLike = (cardID, likeCounter, likeButton) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardID}`, {\n    method: 'PUT',\n    headers: config.headers,  \n  })\n  .then(handleRes)\n}\n\nconst deleteLike = (cardID, likeCounter, likeButton) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardID}`, {\n      method: 'DELETE',\n      headers: config.headers,  \n    })\n    .then(handleRes)\n}\n\nconst deleteCard = (cardID, cardElement) => {\n  return fetch(`${config.baseUrl}/cards/${cardID}`, {\n    method: 'DELETE',\n    headers: config.headers,  \n    })\n    .then(handleRes)\n}\n\nconst editProfileInfo = (config, name, about) => {  \n  return fetch(`${config.baseUrl}/users/me`, {\n    method: 'PATCH',\n    headers: config.headers,\n    body: JSON.stringify({\n      name: name,\n      about: about})\n    })\n    .then(handleRes);\n}\n\nconst editAvatar = (link, profileImage) => {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: 'PATCH',\n    headers: config.headers,\n    body: JSON.stringify({\n      avatar: link})\n  })\n  .then(handleRes)\n}","import {addLike, deleteLike, deleteCard} from './api.js'\nconst cardTemplate = document.querySelector('#card-template').content;\n\nfunction createCard({data, deleteCard, addLike, openImage, userID, deleteLike, cardName, linksrc}) {\n    const cardElement = cardTemplate.querySelector('.card').cloneNode(true);\n    const deleteButton = cardElement.querySelector('.card__delete-button');\n    const cardImage = cardElement.querySelector('.card__image');\n    const likeButton = cardElement.querySelector('.card__like-button');\n    const likeCounter = cardElement.querySelector('.like-counter');\n    cardImage.src = data.link;\n    cardImage.alt = data.name;\n    likeCounter.textContent = data.likes.length;\n    let cardID = data._id;\n    cardElement.querySelector('.card__title').textContent = data.name;\n    cardImage.addEventListener('click', () => openImage(data.link, data.name));\n    likeButton.addEventListener('click', () => toggleLike(cardID, likeCounter, likeButton));\n    if(data.likes.find(like => like._id === userID)){\n        likeButton.classList.add('card__like-button_is-active');     \n    }\n    if (data.owner._id === userID) {\n        deleteButton.addEventListener(\"click\", () => {\n          deleteCard(cardID, cardElement)\n          .then((data) => {\n            cardElement.remove();\n          })\n          .catch((err) => {\n            console.log('ошибка удаления карточки:', err);\n          });\n        });\n      } else {\n        deleteButton.classList.add(\"card__delete-button-hidden\");\n      }\n    return cardElement;\n}\n\nfunction toggleLike(cardID, likeCounter, likeButton) {\n    if(likeButton.classList.contains(\"card__like-button_is-active\")){\n       deleteLike(cardID, likeCounter, likeButton)\n       .then((data) => {\n        likeCounter.textContent = data.likes.length;\n        likeButton.classList.remove('card__like-button_is-active'); \n      })\n      .catch((err) => {\n        console.log('ошибка удаления лайка:', err);\n      }) \n    } else {\n        addLike(cardID, likeCounter, likeButton)\n        .then((data) => {\n            likeCounter.textContent = data.likes.length;\n            likeButton.classList.add('card__like-button_is-active'); \n          })\n        .catch((err) => {\n        console.log('ошибка добавления лайка:', err);\n        }); \n    }\n}\n\nexport {createCard};","function closeAnyPopup() {\n    const popup = document.querySelector('.popup_is-opened');\n    closePopup(popup);\n}\n\nfunction closePopup(popup) {    \n    popup.classList.remove('popup_is-opened');\n    document.removeEventListener('keydown', handleEscape); \n}\n\nfunction openPopup(popup) {\n    popup.classList.add('popup_is-opened'); \n    document.addEventListener('keydown', handleEscape); \n}\n\nfunction handleEscape(evt) {\n    if (evt.key === 'Escape') {\n        closeAnyPopup();\n      }\n}\n\nexport {closePopup, openPopup, handleEscape};","export { enableValidation, clearValidation };\n\n// Функция, которая добавляет класс с ошибкой\nconst showInputError = (formElement, popupInput, errorMessage) => {\n  const errorElement = formElement.querySelector(`.${popupInput.id}-error`);\n  popupInput.classList.add('popup__input_type_error');\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add('popup__error_visible');\n};\n\n// Функция, которая удаляет класс с ошибкой\nconst hideInputError = (formElement, popupInput) => {\n  const errorElement = formElement.querySelector(`.${popupInput.id}-error`);\n  popupInput.classList.remove('popup__input_type_error');\n  errorElement.classList.remove('popup__error_visible');\n  errorElement.textContent = '';\n};\n\n// Функция, которая проверяет валидность поля\nconst isValid = (formElement, popupInput) => {\n  if (popupInput.validity.patternMismatch) {\n    popupInput.setCustomValidity(popupInput.dataset.errorMessage);\n} else {\n    popupInput.setCustomValidity(\"\");\n}\n  if (!popupInput.validity.valid) {\n    showInputError(formElement, popupInput, popupInput.validationMessage);\n  } else {\n    hideInputError(formElement, popupInput);\n  }\n};\n\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((popupInput) => {\n     return !popupInput.validity.valid;\n   })\n }; \n\n const toggleButtonState = (inputList, buttonElement) => {\n  if(hasInvalidInput(inputList)){\n    buttonElement.disabled = true;\n    buttonElement.classList.add('popup__button_disabled');\n  } else {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove('popup__button_disabled');\n  }\n}\n\nconst setEventListeners = (formElement, configValidation) => {\n  const inputList = Array.from(formElement.querySelectorAll(configValidation.inputSelector));\n  console.log(formElement);  \n  const buttonElement = formElement.querySelector(configValidation.submitButtonSelector);\n  toggleButtonState(inputList, buttonElement);\n  inputList.forEach((popupInput) => {\n    popupInput.addEventListener('input', () => {\n      isValid(formElement, popupInput);\n      toggleButtonState(inputList, buttonElement);\n    });\n  });\n}; \n\nconst enableValidation = (configValidation) => {\n  const formList = Array.from(document.querySelectorAll(configValidation.formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, configValidation);\n  });\n};\n\nconst clearValidation = () => {\n  inputList.textContent = '';\n  buttonElement.classList.add('popup__button_disabled');\n  inputList.forEach((inputElement) => {\n    hideInputError(\n      formElement,\n      inputElement,\n      configValidation.inputErrorClass,\n      configValidation.errorClass\n    );\n    inputElement.setCustomValidity('');\n    inputElement.classList.remove(configValidation.inputErrorClass);\n  });\n}\n\n","import {createCard} from './components/card.js';\nimport {closePopup, openPopup, handleEscape} from './components/modal.js';\nimport './pages/index.css';\nimport {enableValidation, clearValidation } from './components/validation.js';\nimport {config, getInitialCards, getUserInfo, postAddNewCard, addLike, deleteLike, deleteCard, editProfileInfo, editAvatar} from './components/api.js';\n\nconst cardsContainer = document.querySelector('.places__list');\nconst profileEditButton = document.querySelector('.profile__edit-button');\nconst popups = document.querySelectorAll('.popup');\nconst popupInputName = document.querySelector('.popup__input_type_name');\nconst popupInputDescription = document.querySelector('.popup__input_type_description');\nconst profileImage = document.querySelector('.profile__image');\nconst profileTitle = document.querySelector('.profile__title');\nconst profileDescription = document.querySelector('.profile__description');\nconst formProfileElement = document.querySelector('.popup__form');\nconst profileAddButton = document.querySelector('.profile__add-button');\nconst avatar = document.querySelector('.avatar');\nconst popupTypeNewCard = document.querySelector('.popup_type_new-card');\nconst popupTypeEdit = document.querySelector('.popup_type_edit');\nconst formNewCard = document.forms['new-place']; \nconst cardName = document.querySelector('.popup__input_type_card-name');\nconst linksrc = document.querySelector('.popup__input_type_url');\nconst popupTypeImage = document.querySelector('.popup_type_image');\nconst popupImage = document.querySelector('.popup__image');\nconst popupCaption = document.querySelector('.popup__caption');\nconst popupTypeEditAvatar = document.querySelector('.popup_type_edit_avatar');\nconst popupTypeEditAvatarInput = popupTypeEditAvatar.querySelector('.popup__input_type_avatar-link');\nconst buttonSubmitEditAvatar = popupTypeEditAvatar.querySelector('.button');\nconst configValidation = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inactiveButtonClass: 'popup__button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible'\n }\n\nlet userID = 0;\n\nfunction changeButtonText(button, text) {\n  button.textContent = text;\n}\n\nfunction handleProfileFormSubmit(evt) {\n    evt.preventDefault();\n    changeButtonText(buttonSubmitEditAvatar, \"Сохранение...\");\n    profileTitle.textContent = popupInputName.value;\n    profileDescription.textContent = popupInputDescription.value;\n    editProfileInfo(config, popupInputName.value, popupInputDescription.value)\n    .then((data) => {\n      console.log(data);\n      profileTitle.textContent = data.name;\n      profileDescription.textContent = data.about;\n    })\n    .catch((err) => {\n      console.log('ошибка редактирования профиля:', err);\n    });\n    changeButtonText(buttonSubmitEditAvatar, \"Сохраненить\");\n    closePopup(popupTypeEdit);\n}\n\nfunction addNewCard(evt) {\n    evt.preventDefault();\n    const data = {\n        name: cardName.value,\n        link: linksrc.value\n    }\n    postAddNewCard(cardName, linksrc)\n    .then((data) => {\n      console.log(data);\n      let cardID = data._id;\n      const card = createCard({data, deleteCard, addLike, openImage, userID, deleteLike, cardName, linksrc});\n      cardsContainer.prepend(card);   \n    })\n    .catch((err) => {\n      console.log('ошибка добавления карточки:', err);\n    })\n}\n\nfunction openImage(cardLink, cardName) {\n    popupImage.src = cardLink;\n    popupImage.alt = cardName;\n    popupCaption.textContent = cardName;\n    openPopup(popupTypeImage);    \n}\n\nprofileEditButton.addEventListener('click', function (evt) {\n    openPopup(popupTypeEdit);\n    popupInputName.value = profileTitle.textContent;\n    popupInputDescription.value = profileDescription.textContent;\n  })\n\nformProfileElement.addEventListener('submit', handleProfileFormSubmit);\n\nprofileAddButton.addEventListener('click', function(evt) {\n    openPopup(popupTypeNewCard);\n})\n\npopupTypeEditAvatar.addEventListener('submit', function(evt) {\n  evt.preventDefault();\n  changeButtonText(buttonSubmitEditAvatar, \"Сохранение...\");\n  editAvatar(popupTypeEditAvatarInput.value, profileImage)\n    .then((result) => {\n      profileImage.src = result.avatar;\n    })\n    .catch((err) => {\n      console.log('ошибка редактирования фото профиля:', err);\n    });\n  closePopup(popupTypeEditAvatar);\n  changeButtonText(buttonSubmitEditAvatar, \"Сохраненить\");\n});\n\navatar.addEventListener('click', function(evt){\n    openPopup(popupTypeEditAvatar);\n})\n\npopups.forEach(function(popup) {\n    popup.addEventListener('click', function(evt) {\n        if(evt.target.classList.contains('popup_is-opened')||evt.target.classList.contains('popup__close')){\n            closePopup(popup);\n        }\n    })\n});\n\nformNewCard.addEventListener('submit', function(evt) {\n    const cardElement = addNewCard(evt);\n    changeButtonText(buttonSubmitEditAvatar, \"Сохранение...\");\n    formNewCard.reset();\n    closePopup(popupTypeNewCard);\n    changeButtonText(buttonSubmitEditAvatar, \"Сохраненить\");\n});\n\nenableValidation(configValidation); \n\nPromise.all([getInitialCards(), getUserInfo()])\n  .then(([cards, userdata]) => {\n    profileTitle.textContent = userdata.name;\n    profileDescription.textContent = userdata.about;\n    profileImage.src = userdata.avatar;\n    userID = userdata._id;\n    \n    cards.forEach(function(data){\n      const card = createCard({data, deleteCard, addLike, openImage, userID, deleteLike});\n      cardsContainer.append(card); \n   });\n  })\n  .catch((err) => {\n    console.log(`Ошибка. Запрос не выполнен: ${err}`);\n  });\n\n\n\n \n\n\n\n\n\n"],"names":["config","baseUrl","headers","authorization","handleRes","res","ok","json","Promise","reject","concat","status","addLike","cardID","likeCounter","likeButton","fetch","method","then","deleteLike","deleteCard","cardElement","cardTemplate","document","querySelector","content","createCard","_ref","data","openImage","userID","cardName","linksrc","cloneNode","deleteButton","cardImage","src","link","alt","name","textContent","likes","length","_id","addEventListener","classList","contains","remove","catch","err","console","log","add","toggleLike","find","like","owner","closePopup","popup","removeEventListener","handleEscape","openPopup","evt","key","toggleButtonState","inputList","buttonElement","some","popupInput","validity","valid","hasInvalidInput","disabled","configValidation","cardsContainer","profileEditButton","popups","querySelectorAll","popupInputName","popupInputDescription","profileImage","profileTitle","profileDescription","formProfileElement","profileAddButton","avatar","popupTypeNewCard","popupTypeEdit","formNewCard","forms","popupTypeImage","popupImage","popupCaption","popupTypeEditAvatar","popupTypeEditAvatarInput","buttonSubmitEditAvatar","changeButtonText","button","text","cardLink","value","preventDefault","about","body","JSON","stringify","editProfileInfo","result","forEach","target","postAddNewCard","card","prepend","addNewCard","reset","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","Array","from","formElement","patternMismatch","setCustomValidity","dataset","errorMessage","errorElement","id","hideInputError","showInputError","validationMessage","isValid","setEventListeners","all","_ref2","cards","userdata","append"],"sourceRoot":""}